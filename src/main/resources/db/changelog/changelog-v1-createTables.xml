<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                     http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="2021-17-08-neural-network-create" author=" olenka_namaka">
        <createTable tableName="neural_network">
            <column autoIncrement="false" name="id" type="uuid">
                <constraints nullable="true" primaryKey="true" unique="true"/>
            </column>
            <column name="layer_amount" type="BIGINT" autoIncrement="false">
                <constraints nullable="false" primaryKey="false" unique="false"/>
            </column>
            <column name="l_rate" type="DECIMAL" autoIncrement="false">
                <constraints nullable="false" primaryKey="false" unique="false"/>
            </column>
            <column name="target_width" type="int" autoIncrement="false">
                <constraints nullable="false" primaryKey="false" unique="false"/>
            </column>
            <column name="target_height" type="int" autoIncrement="false">
                <constraints nullable="false" primaryKey="false" unique="false"/>
            </column>

        </createTable>
    </changeSet>
    <changeSet id="2021-17-08-neural-network-version-create" author=" olenka_namaka">
        <createTable tableName="neural_network_version">
            <column autoIncrement="false" name="id" type="uuid">
                <constraints nullable="true" primaryKey="true" unique="true"/>
            </column>
            <column name="version" type="BIGINT" autoIncrement="true">
                <constraints nullable="true" primaryKey="false" unique="true"/>
            </column>
            <column name="create_on" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                 <constraints nullable="false"/>
            </column>
            <column name="neural_network_model_id" type="uuid">
                <constraints nullable="false" primaryKey="false" unique="false"
                             foreignKeyName="fk_neural_network"
                             references="neural_network(id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="2021-17-08-matrix-create" author=" olenka_namaka">
        <createTable tableName="matrix">
            <column autoIncrement="false" name="id" type="uuid">
                <constraints nullable="true" primaryKey="true" unique="true"/>
            </column>
            <column name="matrix_type" type="BIGINT" autoIncrement="false">
                <constraints nullable="false" primaryKey="false" unique="false"/>
            </column>
            <column name="neural_network_version_model_id" type="uuid">
                <constraints nullable="false" primaryKey="false" unique="false"
                             foreignKeyName="fk_neural_network_version"
                             references=" neural_network_version(id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="2021-17-08-matrix-rows-create" author=" olenka_namaka">
        <createTable tableName="matrix_rows">
            <column autoIncrement="false" name="id" type="uuid">
                <constraints nullable="true" primaryKey="true" unique="true"/>
            </column>
            <column name="matrix_model_id" type="uuid">
                <constraints nullable="false" primaryKey="false" unique="false"
                             foreignKeyName="fk_matrix"
                             references="matrix(id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="2021-17-08-matrix_fields-create" author=" olenka_namaka">
        <createTable tableName="matrix_fields">
            <column autoIncrement="false" name="id" type="uuid">
                <constraints nullable="true" primaryKey="true" unique="true"/>
            </column>
            <column name="data" type="DECIMAL" autoIncrement="false">
                <constraints nullable="false" primaryKey="false" unique="false"/>
            </column>
            <column name="matrix_rows_model_id" type="uuid">
                <constraints nullable="false" primaryKey="false" unique="false"
                             foreignKeyName="fk_matrix_rows"
                             references="matrix_rows(id)"/>
            </column>
        </createTable>
    </changeSet>
</databaseChangeLog>